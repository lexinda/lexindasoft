<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lexindasoftservice.dao.DepartmentDao">

	<!-- 根据id获取系统管理员信息 -->
	<select id="getDepartmentInfo" parameterType="Department" resultType="Department">
		SELECT id,
			department_name as departmentName,
			parent_id as parentId,
			level_id as levelId,
			department_desc as departmentDesc,
			create_time as createTime
		FROM `department`
		WHERE 1=1 and parent_id=#{id}
	</select>
	<!-- 根据id获取系统管理员信息 -->
	<select id="hasChildDepartmentInfo" parameterType="Department" resultType="Department">
		SELECT id,
			department_name as departmentName,
			parent_id as parentId,
			level_id as levelId,
			department_desc as departmentDesc,
			create_time as createTime
		FROM `department`
		WHERE 1=1 and parent_id=#{id}
	</select>
	
	<!-- 根据id获取系统管理员信息 -->
	<select id="getDepartmentLevel" resultType="int">
		SELECT distinct level_id 
		FROM `department`
		WHERE 1=1
	</select>
	
	<!-- 保存系统管理员信息：存在则修改，否则更新 -->
	<insert id="insertDepartmentInfo" parameterType="Department" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO `department`(department_name,parent_id,level_id, department_desc, create_time)
		VALUES(#{departmentName}, #{parentId},#{levelId},#{departmentDesc},now())
	</insert>
	
</mapper>  